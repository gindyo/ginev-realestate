<%-content_for :carousel do%>
<div style="background: black; text-align: center; color: white"><h3>properties <%=@header%></h3></div>
<%-end%>

<div id="results-page" ng-app="Index" ng-controller='IndexCtrl' ng-cloak>
  <div class="container">
    <div class='left' id='filters'>
      <div class='slider-wrap'>
        <br>
        <div re-range-slider title="Price" edges="filters.ranges.price.edges" current="filters.ranges.price.current" ></div>
        
        <div re-range-slider title="Bedrooms" edges="filters.ranges.bedrooms.edges" current="filters.ranges.bedrooms.current" ></div>
        
        <div re-range-slider title="Bathrooms" edges="filters.ranges.bathrooms.edges" current="filters.ranges.bathrooms.current" ></div>
        
      </div>
    </div> 
    <div id='right'>
      <table>
        <tr>
          <td>
            <label >Limit results to:</label>
          </td>
          <td>
              <label >Order by:</label>
          </td>
          <td>
            
          </td>
          <td align='middle'>
            Showing:
          </td>
        </tr>
        <tr>
          <td>
            <select ng-model='pagination.numPerPage'>
              <option value='4'>4</option>
              <option value='8'>8</option>
              <option value='16'>16</option>
              <option value='32'>32</option>
              <option value='64'>64</option>
            </select>
          </td>
          <td>
              <select ng-model='filters.orderBy'>
                <option value='price'>price</option>
                <option value='bathrooms'>bathrooms</option>
                <option value='bedrooms'>bedrooms</option>
                <option value='address'>address</option>
              </select>
          </td>
          <td align='middle'>
            <i class='icon-arrow-{{filters.orderDirection()}}' ng-click='reverseOrder()'></i>
          </td>
          <td align='middle'>
             {{filters.inRangeIndexes.length}} from: {{pagination.totalUnits()}}
          </td>
        </tr>
      </table>
      <div id="gallery-wrap">
        <div class='gallery' on-unit-click='open_unit' re-units-gallery units='currentPage' progress-bar='showProgressBar()' animate='{{true}}'></div>
        <div class="clearfix"></div>
      </div>
      <div class='pagination-wrap'>
        <div page='pagination.currentPage' items-per-page='pagination.numPerPage' max-size='5' total-items='filters.inRangeIndexes.length' on-select-page='changePage(page)' num-pages='pagination.numOfPages' pagination></div>
        <!-- <span id='to_page'>
          go to page:
          <input class='input-small' class='number' min='1' ng-model='pagination.currentPage' type='number'>
          from {{pagination.numOfPages}}
        </span> -->
        <div id='page-slider'> 
          Move the slider to change pages
          <div re-pagination-slider max="{{pagination.numOfPages}}" current-page='pagination.currentPage'> </div>

       </div>
      </div>

      <div class='clearfix'></div>
      
    </div>
  </div>
</div>
<script type="text/javascript">
  propertiesToGet = "<%=@properties_to_get%>"
</script>
